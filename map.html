---
---

<div id='map' class='map'></div>

<script>
  map = L.map('map').setView(
    [
      51.52211,
      -0.08331
    ],
    13
  );

  L.tileLayer('//stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png', {
    subdomains: 'abcd',
    minZoom: 1,
    maxZoom: 20,
  }).addTo(map)

  L.tileLayer('//stamen-tiles-{s}.a.ssl.fastly.net/toner-labels/{z}/{x}/{y}.png', {
    attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    subdomains: 'abcd',
    minZoom: 1,
    maxZoom: 20
  }).addTo(map)

  $.getJSON('{{ site.baseurl }}/map.json', function(data) {
    L.geoJson(data, {
      onEachFeature: onEachFeature
    }).addTo(map)
  })

  function onEachFeature(feature, layer) {
  // does this feature have a property named popupContent?
    if (feature.properties) {
      layer.bindPopup('<a href="' + feature.properties.url + '">' + feature.properties.name + ", " + feature.properties.institution + '</a>');
    }
  }
</script>
